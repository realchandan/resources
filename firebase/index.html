<!DOCTYPE html>
<html>
  <head>
    <title>Firebase demo</title>
  </head>
  <body>
    <button id="btn1">
      <h3>Click Me</h3>
    </button>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.0/firebase-app.js";
      import {
        getFirestore,
        collection,
        doc,
        addDoc,
        setDoc,
        query,
        where,
        limit,
        getDoc,
        getDocs,
        updateDoc,
        deleteDoc
      } from "https://www.gstatic.com/firebasejs/9.1.0/firebase-firestore.js";

      // import {
      //   getDatabase,
      //   ref,
      //   set,
      //   onValue,
      //   get,
      //   update
      // } from "https://www.gstatic.com/firebasejs/9.1.0/firebase-database.js";

      const firebaseConfig = {
        apiKey: "AIzaSyCkSdZEuTSmxiI7z9JuK4hFz914YdSl6i4",
        authDomain: "tutorial-6839b.firebaseapp.com",
        databaseURL:
          "https://tutorial-6839b-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "tutorial-6839b",
        storageBucket: "tutorial-6839b.appspot.com",
        messagingSenderId: "1096258507957",
        appId: "1:1096258507957:web:78b10c99c08151b89d5afc"
      };

      const defaultProject = initializeApp(firebaseConfig);

      // console.log(defaultProject);

      // let defaultDatabase = getDatabase(defaultProject);

      // Realtime Database
      // document
      //   .getElementById("btn1")
      //   .addEventListener("click", setSomeData, false);

      // let fruits_ref = ref(defaultDatabase, "fruits");

      // function setSomeData() {
      //   set(fruits_ref, {
      //     apple: "red",
      //     banana: "yellow",
      //     orange: "orange"
      //   });
      // }

      // get(fruits_ref)
      //   .then((snapshot) => {
      //     if (snapshot.exists()) {
      //       console.log(snapshot.val());
      //     } else {
      //       console.log("No data available");
      //     }
      //   })
      //   .catch((error) => {
      //     console.error(error);
      //   });

      // onValue(fruits_ref, (snapshot) => {
      //   const data = snapshot.val();
      //   console.log(data);
      // });

      // update(fruits_ref, {
      //   mango: "Red"
      // });

      let db = getFirestore(defaultProject);

      const docRef = doc(db, "users", "user1");
      // Get a particular document
      //
      // const docSnap = await getDoc(docRef);
      // if (docSnap.exists()) {
      //   console.log("Document data:", docSnap.data());
      // } else {
      //   console.log("No such document!");
      // }

      // Set data
      //
      // await setDoc(doc(db, "users", "user2"), {
      //   name: "Robert",
      //   age: 30,
      //   hobbies: ["Sports", "Cooking"]
      // });

      // Set a ton of documents
      //
      // fetch("https://jsonplaceholder.typicode.com/users")
      //   .then((response) => response.json())
      //   .then((json) => {
      //     // console.log(json);
      //     json.forEach(async (user) => {
      //       console.log(user);
      //       await addDoc(collection(db, "users"), user);
      //     });
      //   });

      // Get multiple  documents
      //
      // const q = query(
      //   collection(db, "users"),
      //   where("name", "==", "Alice"),
      //   limit(1)
      // );
      // const querySnapshot = await getDocs(q);
      // querySnapshot.forEach((doc) => {
      //   console.log(doc.id, " => ", doc.data());
      // });

      // Update
      // await updateDoc(docRef, {
      //   name: "Bob Johnson"
      // });

      // Delete
      // await deleteDoc(docRef);
    </script>
  </body>
</html>
