<!DOCTYPE html>
<html>
  <head>
    <title>Firebase demo</title>
  </head>
  <body>
    <div>
      <div>
        <p>Email</p>
        <textarea id="email"></textarea>
        <br />
      </div>

      <div>
        <p>Password</p>
        <textarea id="password"></textarea>
        <br />
      </div>

      <button id="signup">
        <h3>Sign Up</h3>
      </button>
      <br />
      <button id="login">
        <h3>Log In</h3>
      </button>
      <br />
      <button id="logout">
        <h3>Log Out</h3>
      </button>
      <button id="display">
        <h3>display current user status</h3>
      </button>
    </div>
    <p id="status">Status -</p>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.0/firebase-app.js";
      import {
        getAuth,
        createUserWithEmailAndPassword,
        signInWithEmailAndPassword,
        signOut,
        onAuthStateChanged,
        sendEmailVerification,
        sendPasswordResetEmail,
        updateProfile,
        updateEmail,
        updatePassword,
        deleteUser,
        reauthenticateWithCredential,
        signInAnonymously
      } from "https://www.gstatic.com/firebasejs/9.1.0/firebase-auth.js";

      const firebaseConfig = {
        apiKey: "AIzaSyCkSdZEuTSmxiI7z9JuK4hFz914YdSl6i4",
        authDomain: "tutorial-6839b.firebaseapp.com",
        databaseURL:
          "https://tutorial-6839b-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "tutorial-6839b",
        storageBucket: "tutorial-6839b.appspot.com",
        messagingSenderId: "1096258507957",
        appId: "1:1096258507957:web:78b10c99c08151b89d5afc"
      };

      const project = initializeApp(firebaseConfig);

      const auth = getAuth();

      function log_e_p() {
        var email = document.getElementById("email").value;
        var password = document.getElementById("password").value;
        console.log(`email - ${email} & password - ${password}`);
      }

      function changestatus(status) {
        document.getElementById("status").innerText = status;
      }

      function signup() {
        var email = document.getElementById("email").value;
        var password = document.getElementById("password").value;

        createUserWithEmailAndPassword(auth, email, password)
          .then((user) => {
            console.log(user);
          })
          .catch((e) => {
            console.log(e);
          });
      }

      function login() {
        var email = document.getElementById("email").value;
        var password = document.getElementById("password").value;

        signInWithEmailAndPassword(auth, email, password)
          .then((user) => {
            console.log(user);
          })
          .catch((e) => {
            console.log(e);
          });
      }

      function logout() {
        signOut(auth);
        console.log("user logged out");
      }

      function display() {
        console.log(auth.currentUser);
      }

      document.getElementById("signup").onclick = signup;
      document.getElementById("login").onclick = login;
      document.getElementById("logout").onclick = logout;
      document.getElementById("display").onclick = display;

      var unlisten = auth.onAuthStateChanged((user) => {
        if (user) {
          console.log(user);
        }
      });

      function stop_listening() {
        unlisten();
      }

      // stop_listening();
    </script>
  </body>
</html>
